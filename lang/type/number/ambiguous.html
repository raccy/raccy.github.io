<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <meta name=viewport content="width=device-width, initial-scale=1"> <title>曖昧な数値型</title><link href="/stylesheets/all.css" rel=stylesheet /><link href="/stylesheets/highlight.css" rel=stylesheet /><link href="/stylesheets/lang-navi.css" rel=stylesheet /><script src="/javascripts/all.js"></script><script src="/javascripts/highlight.pack.js"></script><script src="/javascripts/html5shiv.js"></script><!--[endif]--> </head> <body class="lang lang_type lang_type_number lang_type_number_ambiguous"> <header> <div class=container> <nav class="navbar navbar-default" role=navigation> <div class=container-fluid> <div class=navbar-header> <a class=navbar-brand href="#">自家用プログラム言語大全</a> </div> </div> </nav> </div> </header> <div class=container> <div class=row> <div class=col-md-3> <nav class=lang-navi-sidebar> <h4> 目次 </h4> <ul class="nav nav-pills nav-stacked" role=tablist> <li><a href="/lang/">自家用プログラム言語大全</a><ul class="nav nav-pills nav-stacked" role=tablist><li><a href="/lang/base/">言語の基礎</a><ul class="nav nav-pills nav-stacked" role=tablist><li><a href="/lang/base/hello.html">こんにちは、世界！</a></li></ul></li><li><a href="/lang/operator/">演算子</a></li><li><a href="/lang/type/">型</a><ul class="nav nav-pills nav-stacked" role=tablist><li><a href="/lang/type/number/">数値型</a><ul class="nav nav-pills nav-stacked" role=tablist><li><a href="/lang/type/number/integer.html">整数型</a></li><li><a href="/lang/type/number/real.html">実数型</a></li><li><a href="/lang/type/number/complex.html">複素数型</a></li><li class=active><a href="/lang/type/number/ambiguous.html">曖昧な数値型</a></li></ul></li></ul></li></ul></li> </ul> </nav> </div> <div class=col-md-9> <ol class=breadcrumb> <li> <a href="/lang/">自家用プログラム言語大全</a> </li> <li> <a href="/lang/type/">型</a> </li> <li> <a href="/lang/type/number/">数値型</a> </li> <li class=active> 曖昧な数値型 </li> </ol><h1> 曖昧な数値型 </h1><main><h2> 概要 </h2> <p> 私たちは普段、0と0.0を区別しているでしょうか？+0.0と-0.0の違いを考えることはありますでしょうか？そもそも厳密な整数の計算はある程度大きさまでしか必要としないのではないでしょうか？ある程度大きかったらそこそこの精度で十分じゃないでしょうか？また、5/3を1余り2と答えるのは小学生までだと思っていませんでしょうか？ </p> <p> そんなことを考えたら、整数とか浮動小数点数とか別々に考えるのがばからしくなってきます。ある程度までは整数で、小数だったり指数が必要なぐらい大きな数なら浮動小数点数ですまそうというのが曖昧な数値型です。「曖昧な数値型」って言っていますが、別に名前があるわけじゃありません。それぞれの言語は、その言語のただ一つの最も正しい数値型の実装だと思い込んでいます。 </p> <h2> 曖昧な数値型の特徴 </h2> <p> 細かい仕様は言語によって異なりますが、次のような特徴があります。 </p> <ul> <li> 内部で整数型と浮動小数点数型を自動で切り替えます。 </li> <li> 整数で表現できそうな時はだいたい整数になります。 </li> <li> 除算で割り切れないときは浮動小数点数になります。 </li> <li> 内部での整数表現を越える場合は<strong>勝手に</strong>浮動小数点数に変換します。 </li> <li> ビット演算やシフト演算は整数として扱います。 </li> </ul> <p> 厳密な計算や巨大な数値を扱わない場合はだいたい期待通り動きます。しかし、プログラマーが完全に制御するには言語仕様をよく読んでおく必要があり、複雑になります。 </p> <h2> その他の言語 </h2> <p> PHPも自動的に浮動小数点数に変わりますが、PHP_INT_MAXという定数や型を判別するための関数が用意されており、切り替わったのかどうかを確認できます。PerlやJavaScriptにそのような者が用意されているかはわかりませんでした。 </p></main> <hr> <p> 間違いを見つけた場合や、ご意見・ご指摘は<a href="https://github.com/raccy/raccy.github.io.middleman/issues">GitHubレポジトリIssues</a>へお願いします。 </p> </div> </div> </div> <footer> <hr> <div class=container> <p><a href="/plain/LICENSE.html"> MIT / <img alt=CC-BY src="https://i.creativecommons.org/l/by/4.0/80x15.png"/> Dual Licenses © 2014 raccy</a> </p> </div> </footer> </body> </html>